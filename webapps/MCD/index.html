<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>数字摇奖(老虎机)</title>
<meta name="keyword" content="数字，抽奖，摇奖，老虎机" />
<meta name="description" content="老虎机形式的摇奖" />
<link rel="stylesheet" type="text/css" href="css/styles.css" media="screen" />

</head>
<body>

<div class="main_bg">
    <div class="main">
      <div class="ui inverted segment">
        <div id="res" class="result"></div>
        <div class="num_mask"></div>
        <div class="num_box">
            <div class="num"></div>
            <div class="num"></div>
            <div class="num"></div>
             <button class="ui inverted orange button" id="btn">抽獎</button>

        </div>
    </div>
</div>
</div>
<audio id="audio" src="f.mp3" ></audio>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/1.11.8/semantic.min.js"></script>
<script type="text/javascript" src="js/jquery-1.11.0.js"></script>
<script type="text/javascript" src="js/animateBackground-plugin.js"></script>
<script type="text/javascript" src="js/easing.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<script>
var x = 0;
function numRand() {
  if(x==0){
    var y = 9999;
    x++;
  }else if(x==1){
    var y = 8888;
    x++;
  }else{
    var y = 7777;
    x++;
  }
  return y;
}

var isBegin = false;
$(function(){
    var u = 265;
    $('#btn').click(function(){
        if(isBegin) return false;
        isBegin = true;
        $(".num").css('background-position', '11px 0');
        var result = numRand();
        if(result == 9999){
          $('#res');
        }
        if(result == 8888){
          $('#res');
        }
        if(result == 7777){
          $('#res');
        }
        var num_arr = (result+'').split('');
        var count = 0 ;
        $(".num").each(function(index){
            play();
            var _num = $(this);
            var yPos = (u*60) - (u*num_arr[index]);
            setTimeout(function(){
                _num.animate({
                    backgroundPosition: '11px ' + yPos + 'px'
                },{
                    duration: 6000+index*3000,
                    easing: "easeInOutCirc",
                    complete: function(){
                        if(index==2) isBegin = false;
                    }
                });
            }, index * 300);
        });
    });
});
</script>
</body>
</html>
